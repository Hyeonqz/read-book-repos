# 운영체제 
운영체제는 사용자를 위한 프로그램이 아닌, 사용자가 실행하는 프로그램을 위한 프로그램이다 <br>
즉 사용자가 실행하는 응용 프로그램이 올바르게 실행되도록 돕고 필요한 자원을 할당해주는 프로그램이다 <br>

### 운영체제의 심장, 커널
운영체제는 현존하는 프로그램 중 규모가 가장 큰 프로그램 중 하나이다 <br>
운영체제가 응용 프로그램에 제공하는 서비스 종류는 다양하지만, 그중에서도 핵심 서비스는 <br>
자원에 접근,조작 기능, 프로그램 실행 등 이 있다 <br>

이러한 운영체제에서 핵심 서비스를 담당하는 부분을 **커널** 이라고 한다 <br>

운영체제가 있는 기기에는 모두 커널이 존재한다<br>
커널은 마치 사람의 심장, 자동차의 엔진과 같은 역할을 한다 <br>

운영체제가 제공하는 서비스 중 커널에 포함되지 않는 서비스도 있다 <br>
대표적으로 사용자 인터페이스이다 (커널 서비스가 아닌 운영체제가 자체적으로 제공한다)<br>

운영체제가 제공하는 UI 는 GUI, CLI 가 있다 <br>

### 이중 모드와 시스템 호출
os 는 사용자가 실행하는 응용 프로그램이 하드웨어 자원에 직접 접근하는 것을 방지하여 자원을 보호한다 <br>
그래서 os 는 모든 응용프로그램 자원에 접근하려고 할 때 os 를 통해서만 접근할 수 있게 한다 (문지기와 같은 역할)<br>

이러한 문지기 역할을 이중 모드 로 구현이 된다 <br>

CPU 가 명령어를 실행하는 모드를 사용자 모드, 커널 모드 2가지로 구분을 한다 <br>
- 사용자 모드: 운영체제 서비스를 제공받을 수 없다.
  - 즉 커널 영역의 코드를 실행할 수 없는 모드 이다.
  - 일반적인 응용 프로그램은 기본적으로 사용자 모드로 실행이 된다

- 커널모드: 운영체제 서비스를 제공받을 수 있다.
  - 자원에 접근하고 모든 명령어를 실행할 수 있다.
  - os 는 커널모드로 실행되기 때문에 자원에 접근할 수 있다.

사용자 모드로 실행되는 프로그램이 자원에 접근하는 운영체제 서비스를 제공받으려면 os 에 요청을 보내 커널모드로 전환해야 한다 <br>
이 요청을 **'시스템 호출(시스템 콜)'** 이라고 한다.

시스템 콜 이 실행되면 CPU 는 지금까지 작업을 백업하고, 커널 영역 내에 시스템 콜을 수행하는 코드를 실행한 다 <br>
그리고 기존에 실행하던 응용프로그램으로 복귀하여 실행을 한다 <br>

#### 프로세스 관리
실행중인 프로그램을 **프로세스** 라고 한다. <br>
우리가 pc 를 사용하는 동안 메모리 안에서는 새로운 프로세스들이 생성되고, 사용되지 않는 프로세스는 메모리에서 삭제 된다 <br>

일반적으로 하나의 CPU 는 한 번에 하나의 프로세스만 실행할 수 있기에 CPU 는 이 프로세스들을 조금씩 번갈아가며 실행한다 <br>
즉 CPU 는 보기에 여러 프로세스를 동시에 실행시키는 것 처럼보여도, 한 프로세스를 실행하다가 다른 프로세스로 실행을 전환하는 작업을 반복한다 <br>

각 프로세스는 상태도, 사용하고자 하는 자원도 다양하다 <br>
입출력장치를 주로 사용하는 프로세스도 있고, 입출력장치는 거의 사용하지 않고 주로 CPU 만 사용하는 프로세스도 있다 <br>

### 자원 접근 및 할당
모든 프로세스는 실행을 위해 자원을 필요로 한다 <br>
그리고 os 는 프로세스들이 사용할 자원에 접근하고 조작함으로써 프로세스에 필요한 자원을 할당해준다 <br>

#### CPU
일반적으로 메모리에 여러 프로세스가 적재되고, 하나의 CPU 는 한 번에 하나의 프로세스만 실행할 수 있다 <br>
그러므로 하나의 CPU 를 이용하고 있다면 다른 프로세스는 기다려야 한다 <br>

os 는 프로세스들에게 공정하게 cpu 를 할당하기 위해 우선순위를 정해야 한다<br>
이를 **cpu 스케줄링** 이라고 한다 <br>

#### 메모리
메모리에 적재된 프로세스들은 크기도, 적재되는 주소도 다양하다 <br>
그래서 os 는 새로운 프로세스가 적재될 때 마다 어느 주소에 적재해야 할지를 결정해야 한다 <br>

#### 입출력장치
인터럽트 서비스 루틴은 운영체제가 제공하는 기능으로 커널 영역에 있다 <br>
입출력장치가 발생시키는 하드웨어 인터럽트도 마찬가지 이다 <br>

입출력장치가 cpu 에 하드웨어 인터럽트 요청 신호를 보내면 cpu 는 하던 일을 잠시 백업한 뒤 커널 영역에 있는 인터럽트 서비스 루틴을 실행한다 <br>
이 처럼 os 는 인터럽트를 처리하는 프로그램, 즉 인터럽트 서비스 루틴을 제공함으로 써 입출력 작업을 수행한다.

#### 파일 시스템 관리
파일 시스템(생성,삭제,이동) 도 os 가 지원하는 핵심 서비스 이다 <br>

- 커널은 운영체제의 핵심 기능을 담당한다.
- 이중 모드는 CPU 가 명령어를 실행하는 모드를 커널 모드와 사용자 모드로 구분하는 방식이다.
- 시스템호출은 운영체제의 서비스를 제공받기 위해 커널 모드로 전환하는 방법이다.
- 대표적인 운영체제 서비스로 프로세스 관리, 자원 접근 및 할당, 파일 시스템 관리가 있다.